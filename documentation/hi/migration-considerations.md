# प्रवासन संबंधी विचार

अपने डेटा मॉडल को अपडेट करते समय, विशेष रूप से स्थायी या सिंक्रनाइज़ किए गए डेटा के लिए, आपको पुराने डेटा को लोड करते समय संभावित समस्याओं से बचने के लिए पश्चगामी संगतता को संभालना होगा। यहाँ कुछ महत्वपूर्ण बातें ध्यान में रखनी हैं:

## 1. गैर-वैकल्पिक फ़ील्ड जोड़ना
यदि आप अपने मॉडल में नए गैर-वैकल्पिक फ़ील्ड जोड़ते हैं, तो पुराने डेटा को डीकोड करना (जिसमें वे फ़ील्ड नहीं होंगे) विफल हो सकता है। इससे बचने के लिए:
- नए फ़ील्ड को डिफ़ॉल्ट मान देने पर विचार करें।
- अपने ऐप के पुराने संस्करणों के साथ संगतता सुनिश्चित करने के लिए नए फ़ील्ड को वैकल्पिक बनाएं।

### उदाहरण:
```swift
struct Settings: Codable {
    var text: String
    var isDarkMode: Bool
    var newField: String? // नया फ़ील्ड वैकल्पिक है
}
```

## 2. डेटा प्रारूप में परिवर्तन
यदि आप किसी मॉडल की संरचना को संशोधित करते हैं (उदाहरण के लिए, प्रकार को `Int` से `String` में बदलना), तो पुराने डेटा को पढ़ते समय डीकोडिंग प्रक्रिया विफल हो सकती है। एक सहज प्रवासन की योजना बनाएं:
- पुराने डेटा प्रारूपों को नई संरचना में बदलने के लिए प्रवासन तर्क बनाना।
- पुराने डेटा को संभालने और इसे अपने नए मॉडल में मैप करने के लिए `Decodable` के कस्टम इनिशियलाइज़र का उपयोग करना।

### उदाहरण:
```swift
struct Settings: Codable {
    var text: String
    var isDarkMode: Bool
    var version: Int

    // पुराने संस्करणों के लिए कस्टम डीकोडिंग तर्क
    init(from decoder: Decoder) throws {
        let container = try decoder.container(keyedBy: CodingKeys.self)
        self.text = try container.decode(String.self, forKey: .text)
        self.isDarkMode = try container.decode(Bool.self, forKey: .isDarkMode)
        self.version = (try? container.decode(Int.self, forKey: .version)) ?? 1 // पुराने डेटा के लिए डिफ़ॉल्ट
    }
}
```

## 3. हटाए गए या पदावनत फ़ील्ड को संभालना
यदि आप मॉडल से कोई फ़ील्ड हटाते हैं, तो सुनिश्चित करें कि ऐप के पुराने संस्करण अभी भी बिना क्रैश हुए नए डेटा को डीकोड कर सकते हैं। आप:
- डीकोड करते समय अतिरिक्त फ़ील्ड को अनदेखा कर सकते हैं।
- पुराने डेटा को संभालने और पदावनत फ़ील्ड को ठीक से प्रबंधित करने के लिए कस्टम डीकोडर का उपयोग कर सकते हैं।

## 4. अपने मॉडलों का संस्करण बनाना

अपने मॉडलों का संस्करण बनाने से आप समय के साथ अपने डेटा संरचना में परिवर्तनों को संभाल सकते हैं। अपने मॉडल के हिस्से के रूप में एक संस्करण संख्या रखकर, आप पुराने डेटा प्रारूपों को नए में बदलने के लिए आसानी से प्रवासन तर्क लागू कर सकते हैं। यह दृष्टिकोण सुनिश्चित करता है कि आपका ऐप पुरानी डेटा संरचनाओं को संभाल सकता है, जबकि आसानी से नए संस्करणों में संक्रमण कर सकता है।

- **संस्करण बनाना क्यों महत्वपूर्ण है**: जब उपयोगकर्ता अपने ऐप को अपडेट करते हैं, तो उनके पास अभी भी उनके उपकरणों पर पुराना डेटा संग्रहीत हो सकता है। संस्करण बनाने से आपके ऐप को डेटा के प्रारूप को पहचानने और सही प्रवासन तर्क लागू करने में मदद मिलती है।
- **कैसे उपयोग करें**: अपने मॉडल में एक `version` फ़ील्ड जोड़ें और डीकोडिंग प्रक्रिया के दौरान इसकी जाँच करें ताकि यह निर्धारित किया जा सके कि प्रवासन की आवश्यकता है या नहीं।

### उदाहरण:
```swift
struct Settings: Codable {
    var version: Int
    var text: String
    var isDarkMode: Bool

    // संस्करण-विशिष्ट डीकोडिंग तर्क को संभालें
    init(from decoder: Decoder) throws {
        let container = try decoder.container(keyedBy: CodingKeys.self)
        self.version = try container.decode(Int.self, forKey: .version)
        self.text = try container.decode(String.self, forKey: .text)
        self.isDarkMode = try container.decode(Bool.self, forKey: .isDarkMode)

        // यदि किसी पुराने संस्करण से माइग्रेट कर रहे हैं, तो यहाँ आवश्यक परिवर्तन लागू करें
        if version < 2 {
            // पुराने डेटा को नए प्रारूप में माइग्रेट करें
        }
    }
}
```

- **सर्वोत्तम अभ्यास**: शुरू से ही `version` फ़ील्ड के साथ शुरू करें। हर बार जब आप अपनी मॉडल संरचना को अपडेट करते हैं, तो संस्करण बढ़ाएँ और आवश्यक प्रवासन तर्क को संभालें।

## 5. प्रवासन का परीक्षण
हमेशा अपने प्रवासन का अच्छी तरह से परीक्षण करें, अपने मॉडल के नए संस्करणों के साथ पुराने डेटा को लोड करने का अनुकरण करके यह सुनिश्चित करने के लिए कि आपका ऐप अपेक्षा के अनुरूप व्यवहार करता है।

---
यह अनुवाद स्वचालित रूप से उत्पन्न किया गया था और इसमें त्रुटियाँ हो सकती हैं। यदि आप एक देशी वक्ता हैं, तो हम एक पुल अनुरोध के माध्यम से सुधारों में आपके योगदान की सराहना करेंगे।
